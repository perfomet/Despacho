@model Datos.Modelo.Solicitud
@{
	ViewBag.SeccionTieneTitulo = true;
	ViewBag.Pagina = 1;

	if (Model.SolicitudDespachoId == 0)
	{
		ViewBag.Title = "Despacho - Nueva Solicitud";
		ViewBag.TituloSeccion = "Nueva Solicitud";
	}
	else
	{
		ViewBag.Title = "Despacho - Solicitud " + Model.SolicitudDespachoId;
		ViewBag.TituloSeccion = "Solicitud " + Model.SolicitudDespachoId;
	}

	List<Datos.Modelo.SeccionFormulario> secciones = Datos.Datos.SeccionFormulario.ObtenerSeccionesFormulario();
}

@section Less{
	<link rel="stylesheet/less" type="text/css" href="~/Content/less/solicitud.less" />
}

@section Scripts{
	<script type="text/javascript" src="~/Content/js/Solicitud.js"></script>
}

<div class="m-portlet m-portlet--full-height">
	<!--begin: Portlet Head-->
	<div class="m-portlet__head">
		<div class="m-portlet__head-caption">
			<div class="m-portlet__head-title">
				<h3 class="m-portlet__head-text">
					Formulario de Solicitud
				</h3>
			</div>
		</div>
		<div class="m-portlet__head-tools">
			<ul class="m-portlet__nav">
				<li class="m-portlet__nav-item">
					<a href="#" data-toggle="m-tooltip" class="m-portlet__nav-link m-portlet__nav-link--icon" data-direction="left" data-width="auto" title="Ver manual de llenado del formulario">
						<i class="flaticon-info m--icon-font-size-lg3"></i>
					</a>
				</li>
			</ul>
		</div>
	</div>
	<!--end: Portlet Head-->
	<!--begin: Portlet Body-->
	<div class="m-portlet__body m-portlet__body--no-padding">
		<!--begin: Form Wizard-->
		<div class="m-wizard m-wizard--4 m-wizard--info" id="formulario-solicitud">

			<input type="hidden" id="seccionActual" value="@Model.EstadoSolicitud.SeccionFormularioId" />

			<!--begin: Message container -->
			<div class="m-portlet__padding-x">
				<!-- Here you can put a message or alert -->
			</div>
			<!--end: Message container -->
			<div class="row m-row--no-padding">
				<div class="col-xl-3 col-lg-12">
					<!--begin: Form Wizard Head -->
					<div class="m-wizard__head">

						<!--begin: Form Wizard Progress --
						<div class="m-wizard__progress">
							<div class="progress">
								<div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
							</div>
						</div>
						<!--end: Form Wizard Progress -->
						<!--begin: Form Wizard Nav -->
						<div class="m-wizard__nav">
							<div class="m-wizard__steps">
								@foreach (Datos.Modelo.SeccionFormulario seccion in secciones)
								{
									if (seccion.EstaActivo && Model.EstadoSolicitud.SeccionFormularioId >= seccion.SeccionFormularioId)
									{
										<div class="m-wizard__step" m-wizard-target="@seccion.Clase">
											<div class="m-wizard__step-info">
												<a href="#" class="m-wizard__step-number">
													<span><span>@seccion.SeccionFormularioId</span></span>
												</a>
												<div class="m-wizard__step-line">
													<span></span>
												</div>
												<div class="m-wizard__step-label">
													@seccion.Descripcion
												</div>
											</div>
										</div>
									}
								}
							</div>
						</div>
						<!--end: Form Wizard Nav -->
					</div>
					<!--end: Form Wizard Head -->
				</div>
				<div class="col-xl-9 col-lg-12">
					<!--begin: Form Wizard Form-->
					<div class="m-wizard__form">
						<!--
							1) Use m-form--label-align-left class to alight the form input lables to the right
							2) Use m-form--state class to highlight input control borders on form validation
						-->
						<form class="m-form m-form--label-align-left- m-form--state-" id="m_form">
							<!--begin: Form Body -->
							<div class="m-portlet__body m-portlet__body--no-padding">
								@foreach (Datos.Modelo.SeccionFormulario seccion in secciones)
								{
									if (seccion.EstaActivo && Model.EstadoSolicitud.SeccionFormularioId >= seccion.SeccionFormularioId)
									{
										@Html.Partial("Secciones/" + seccion.Vista, Model)
									}
								}
							</div>
							<!--end: Form Body -->
							<!--begin: Form Actions -->
							<div class="m-portlet__foot m-portlet__foot--fit m--margin-top-40">
								<div class="m-form__actions">
									<div class="row">
										@if (Model.EstadoSolicitud.SeccionFormularioId > (int)Datos.Modelo.SeccionesFormulario.Solicitud)
										{
											<div class="col-lg-6 m--align-left">
												<a href="#" class="btn btn-secondary m-btn m-btn--custom m-btn--icon" data-wizard-action="prev">
													<span>
														<i class="la la-arrow-left"></i>&nbsp;&nbsp;
														<span>Back</span>
													</span>
												</a>
											</div>
										}
										<div class="col-lg-6 m--align-right">
											<a href="#" class="btn btn-primary m-btn m-btn--custom m-btn--icon" data-wizard-action="submit" id="btnGuardar">
												<span>
													<i class="la la-check"></i>&nbsp;&nbsp;
													<span>@(Model.EstadoSolicitud.SeccionFormularioId == (int)Datos.Modelo.SeccionesFormulario.Solicitud ? "Solicitar" : "Guardar")</span>
												</span>
											</a>
											<a href="#" class="btn btn-success m-btn m-btn--custom m-btn--icon" data-wizard-action="next" id="btnContinuar">
												<span>
													<span>Continuar</span>&nbsp;&nbsp;
													<i class="la la-arrow-right"></i>
												</span>
											</a>
										</div>
									</div>
								</div>
							</div>
							<!--end: Form Actions -->
						</form>
					</div>
					<!--end: Form Wizard Form-->

				</div>
			</div>
		</div>
		<!--end: Form Wizard-->

	</div>
	<!--end: Portlet Body-->
</div>
<!--End::Main Portlet-->
